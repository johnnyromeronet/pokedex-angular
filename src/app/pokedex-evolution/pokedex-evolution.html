<div class="bg-gray-800 rounded-md py-2 px-4 shadow-inner w-full shadow-sm shadow-black">
    <h2 class="text-white font-semibold font-ds-digi text-xl mb-4">Evolutions</h2>

    <div class="flex items-center justify-start flex-col md:flex-row gap-2 w-full overflow-auto max-h-80 pb-2">
        @if(evolutions() && details()) {
        <ng-container *ngTemplateOutlet="evolutionTemplate; context: { $implicit: evolutions()!.chain }"></ng-container>
        } @else {
        <p class="font-ds-digi text-xl text-white uppercase w-full">Select a Pokemon.</p>
        }
    </div>
</div>

<ng-template #evolutionTemplate let-data>
    <ng-container *ngTemplateOutlet="pokemonTemplate; context: { $implicit: data.species }"></ng-container>
    @if(data.evolves_to && data.evolves_to.length > 0) {
    <div class="flex flex-col items-center flex-shrink-0">
        <span class="hidden md:block text-white text-3xl">→</span>
        <span class="block md:hidden text-white text-3xl">↓</span>
    </div>
    @for(item of data.evolves_to; track item.species.name) {
    <ng-container *ngTemplateOutlet="evolutionTemplate; context: { $implicit: item }"></ng-container>
    }
    }
</ng-template>

<ng-template #pokemonTemplate let-data>
    <div class="flex flex-row md:flex-col items-center justify-center flex-shrink-0 gap-2">
        <div (click)="selectPokemon(data)" [ngClass]="{'border border-white': selected()?.id === data.id}"
            class="w-24 h-24 rounded-full border-4 border-gray-400 flex justify-center items-center bg-gray-600 flex-shrink-0 cursor-pointer">
            <img [src]="'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/'+ data.id + '.png'"
                [alt]="data.name" class="w-32 h-32 object-contain">
        </div>

        <div class="flex flex-col items-start md:items-center text-white font-semibold text-base font-ds-digi">
            <p class="truncate uppercase text-center">
                <span class="text-gray-400 font-normal">#{{ data.id | padzero }}</span>
                {{ data.name }}
            </p>
            <div class="flex justify-center gap-1 mt-1 flex-wrap">
                @if(selected()?.id == data.id) {
                @for(item of details()!.types; track item.type.name) {
                <span class="px-2 py-1 rounded-md font-extrabold text-xs" [class]="'bg-' + item.type.name">
                    {{item.type.name}}
                </span>
                }
                } @else {
                <span class="px-2 py-1 rounded-md font-extrabold text-xs">&nbsp;</span>
                }
            </div>
        </div>
    </div>
</ng-template>